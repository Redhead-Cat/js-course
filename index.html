<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Lesson12</title>
    <style>
      .wrap, .wrap2 {
        width: 100%;
        overflow: hidden;
      }
      .box, .box2{
        float: left;
        width:100px;
        height: 100px;
        margin-left:20px;
        margin-bottom: 20px;
        padding-top: 40px;
        text-align: center;
        border: 1px solid rgb(154, 205, 50);
        background: rgba(154, 205, 50,0.8);
        box-sizing: border-box;
        cursor: pointer;
      }
      .box:last-child,.box2:last-child{
        clear: right;
        margin-right: 50px;
      }
    .text_content {
      display: block;;
      width: 100%;
      text-align: center;
    }
    .plus,.minus {
      margin-top: 10px;
    }
    [contenteditable="true"] {
      min-height: 30px;
      font-size: 20px;
      line-height: 20px;
      margin-bottom: 30px;
      border: 1px solid;
    }
    .letter {
      width: 30px;
      height: 30px;
      text-align: center;
      line-height: 30px;
      border: 1px solid;
      margin-right: 15px;
      float: left;
    }

    </style>
</head>
<body>
    <h1>DOM, BOM + Events</h1>
    <div class="wrap">
        <div class="box">0</div>
        <div class="box">0</div>
        <div class="box">0</div>
        <div class="box">0</div>
        <div class="box">0</div>
    </div>
    <div class="wrap2">
      <div class="box2">
        <span class=text_content>0</span>
        <button class="plus" type="button">+</button>
        <button class="minus" type="button">-</button>
      </div>
      <div class="box2">
        <span class=text_content>0</span>
        <button class="plus" type="button">+</button>
        <button class="minus" type="button">-</button>
      </div>
      <div class="box2">
        <span class=text_content>0</span>
        <button class="plus" type="button">+</button>
        <button class="minus" type="button">-</button>
      </div>
      <div class="box2">
        <span class=text_content>0</span>
        <button class="plus" type="button">+</button>
        <button class="minus" type="button">-</button>
      </div>
      <div class="box2">
        <span class=text_content>0</span>
        <button class="plus" type="button">+</button>
        <button class="minus" type="button">-</button>
      </div>
  </div>
  <div class="container">
    <div class="enter_text" contenteditable="true"></div>
  </div>
  
  
    
    <script>
      'use strict';
     const $boxes=document.querySelectorAll('.box');
     const $boxes2=document.querySelectorAll('.box2');
     const link='https://ithillel.ua/?utm_source=%D0%9A%D0%B0%D1%80%D0%BB%20%D1%83%20%D0%9A%D0%BB%D0%B0%D1%80%D1%8B%20%D1%83%D0%BA%D1%80%D0%B0%D0%BB%20%D0%BA%D0%BE%D1%80%D0%B0%D0%BB%D0%BB%D1%8B&utm_medium=,%20%D0%B0%20%D0%9A%D0%BB%D0%B0%D1%80%D0%B0%20%D1%83%20%D0%9A%D0%B0%D1%80%D0%BB%D0%B0%20%D1%83%D0%BA%D1%80%D0%B0%D0%BB%D0%B0%20%D0%BA%D0%BB%D0%B0%D1%80%D0%BD%D0%B5%D1%82.&utm_campaign=%D0%9A%D0%BE%D1%80%D0%BE%D0%BB%D0%B5%D0%B2%D0%B0%20%D0%9A%D0%BB%D0%B0%D1%80%D0%B0%20%D0%BA%D0%B0%D0%B2%D0%B0%D0%BB%D0%B5%D1%80%D0%B0&utm_term=%D0%9A%D0%B0%D1%80%D0%BB%D0%B0%20%D1%81%D1%82%D1%80%D0%BE%D0%B3%D0%BE%20%D0%BA%D0%B0%D1%80%D0%B0%D0%BB%D0%B0&utm_content=%D0%B7%D0%B0%20%D0%BA%D1%80%D0%B0%D0%B6%D1%83%20%D0%BA%D0%BE%D1%80%D0%B0%D0%BB%D0%BB%D0%BE%D0%B2';
    
     $boxes.forEach(function(box){
             box.addEventListener('click', function(){
                box.innerText=++box.innerText;            
          });
      });
      $boxes2.forEach(function(box2){
        box2.querySelector('.plus').addEventListener('click', function(){
          this.closest('.box2').querySelector('.text_content').textContent++
        });
        box2.querySelector('.minus').addEventListener('click', function(){
          this.closest('.box2').querySelector('.text_content').textContent--
        });
      });
     
     function makeObjFromQuery(link){
      let arr=link.split('?');
     let newArr=arr[1].split('&');
     
     function createArr(newArr){
      let resultArr=[];
      for(let i=0;i<=newArr.length - 1;i++){
        resultArr[i]=newArr[i].split('=');
      }
       return resultArr;
     }
    let resultArr=createArr(newArr);   
     
    let finalValue=Object.fromEntries(resultArr);

    for(let key in finalValue){
      finalValue[key]=decodeURIComponent(finalValue[key]);
    }
        return finalValue;
     }
    let linkObject= makeObjFromQuery(link);

 function printData(obj){
  let table='<table border="1" style="margin-left:20px; border-collapse:collapse;">';
    for(let key in obj){
      let tr='<tr>';
       tr+= `<td style="padding:5px;">${key}</td>`;
        tr+=`<td style="padding:5px;">${obj[key]}</td>`;
        tr+='</tr>'; 
     table+=tr;
     }      
    table+='</table>'; 
   const $div=document.createElement('div');
    $div.innerHTML=`${table}`;
     return document.body.append($div);
 }
 printData(linkObject);

const $container=document.querySelector('.container');
const $enter_text=document.querySelector('.enter_text');
    $enter_text.addEventListener('input',function(){
      const $div=document.createElement('div');
      $div.classList.add('letter');
      $div.innerHTML=this.textContent[this.textContent.length-1];
      $container.append($div);
    })
    </script>
</body>
</html>
